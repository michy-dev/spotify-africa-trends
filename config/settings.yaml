# Spotify Africa Comms Trends Dashboard Configuration
# =====================================================

app:
  name: "Spotify Africa Comms Trends Dashboard"
  timezone: "Africa/Johannesburg"
  update_schedule: "0 6 * * *"  # 6 AM daily
  log_level: "INFO"

# Market Configuration
markets:
  priority:
    - code: "ZA"
      name: "South Africa"
      languages: ["en", "zu", "xh"]
      weight: 1.5
    - code: "NG"
      name: "Nigeria"
      languages: ["en", "yo", "ha"]
      weight: 1.5
    - code: "KE"
      name: "Kenya"
      languages: ["en", "sw"]
      weight: 1.3
    - code: "GH"
      name: "Ghana"
      languages: ["en"]
      weight: 1.2
    - code: "TZ"
      name: "Tanzania"
      languages: ["sw", "en"]
      weight: 1.1
    - code: "UG"
      name: "Uganda"
      languages: ["en", "sw"]
      weight: 1.0
    - code: "AO"
      name: "Angola"
      languages: ["pt"]
      weight: 1.0
    - code: "CI"
      name: "Côte d'Ivoire"
      languages: ["fr"]
      weight: 1.0
    - code: "SN"
      name: "Senegal"
      languages: ["fr"]
      weight: 1.0
    - code: "EG"
      name: "Egypt"
      languages: ["ar", "en"]
      weight: 1.2
    - code: "MA"
      name: "Morocco"
      languages: ["ar", "fr"]
      weight: 1.1

  regions:
    - name: "Southern Africa"
      markets: ["ZA", "AO"]
    - name: "West Africa"
      markets: ["NG", "GH", "CI", "SN"]
    - name: "East Africa"
      markets: ["KE", "TZ", "UG"]
    - name: "North Africa"
      markets: ["EG", "MA"]

# Topic Taxonomy
topics:
  music_audio:
    name: "Music & Audio"
    icon: "music"
    subtopics:
      - "artists"
      - "genres"
      - "songs"
      - "playlists"
      - "live_events"
      - "streaming_moments"
      - "industry_issues"
    keywords:
      - "new music"
      - "album drop"
      - "concert"
      - "festival"
      - "afrobeats"
      - "amapiano"
      - "bongo flava"
      - "gqom"
      - "highlife"
      - "gengetone"
      - "raï"
      - "gnawa"
      - "kuduro"
      - "mbalax"

  culture:
    name: "Culture"
    icon: "users"
    subtopics:
      - "memes"
      - "youth_culture"
      - "identity"
      - "tv_film"
      - "sport"
      - "internet_slang"
    keywords:
      - "viral"
      - "trend"
      - "challenge"
      - "nollywood"
      - "big brother"
      - "afcon"
      - "premier league"

  fashion_beauty:
    name: "Fashion & Beauty"
    icon: "shirt"
    subtopics:
      - "drops"
      - "designers"
      - "runway"
      - "streetwear"
      - "beauty_trends"
    keywords:
      - "fashion week"
      - "lookbook"
      - "style"
      - "makeup"
      - "skincare"

  current_affairs:
    name: "Current Affairs"
    icon: "newspaper"
    subtopics:
      - "elections"
      - "protests"
      - "conflict"
      - "public_safety"
      - "policy"
    keywords:
      - "election"
      - "protest"
      - "government"
      - "minister"
      - "president"
    risk_weight: 2.0

  brand_comms:
    name: "Brand & Comms Issues"
    icon: "shield"
    subtopics:
      - "trust_safety"
      - "misinformation"
      - "creator_economy"
      - "ai_debates"
      - "sponsorship"
    keywords:
      - "cancel"
      - "boycott"
      - "controversy"
      - "fake news"
      - "scam"
    risk_weight: 1.8

  spotify_specific:
    name: "Spotify Specific"
    icon: "spotify"
    subtopics:
      - "mentions"
      - "competitors"
      - "features"
      - "app_issues"
      - "pricing"
      - "partnerships"
      - "artist_relations"
    keywords:
      - "spotify"
      - "apple music"
      - "boomplay"
      - "audiomack"
      - "youtube music"
      - "deezer"
      - "blend"
      - "wrapped"
      - "playlist"
    spotify_adjacency: 2.0

# Seed Entities
entities:
  artists:
    - "Burna Boy"
    - "Wizkid"
    - "Davido"
    - "Tems"
    - "Rema"
    - "Asake"
    - "Ayra Starr"
    - "Fireboy DML"
    - "Black Sherif"
    - "Sarkodie"
    - "Stonebwoy"
    - "Diamond Platnumz"
    - "Harmonize"
    - "Sauti Sol"
    - "Nyashinski"
    - "Nasty C"
    - "Cassper Nyovest"
    - "Focalistic"
    - "Uncle Waffles"
    - "DBN Gogo"
    - "Kabza De Small"
    - "DJ Maphorisa"
    - "Amr Diab"
    - "Mohamed Ramadan"
    - "Saad Lamjarred"
    - "Innoss'B"
    - "Youssou N'Dour"

  labels:
    - "Mavin Records"
    - "YBNL"
    - "Spaceship Entertainment"
    - "Chocolate City"
    - "Ambitious Entertainment"
    - "Kalawa Jazmee"
    - "Ambitiouz Entertainment"
    - "WCB Wasafi"

  festivals:
    - "Afro Nation"
    - "Nyege Nyege"
    - "Rocking the Daisies"
    - "Blankets and Wine"
    - "Lake of Stars"
    - "Bushfire Festival"
    - "Mawazine"
    - "FESPACO"

  competitors:
    - "Apple Music"
    - "Boomplay"
    - "Audiomack"
    - "YouTube Music"
    - "Deezer"
    - "uduX"
    - "Mdundo"

# Scoring Configuration
scoring:
  weights:
    velocity: 0.25
    reach: 0.20
    market_impact: 0.20
    spotify_adjacency: 0.20
    risk_factor: 0.15

  thresholds:
    high_priority: 75
    medium_priority: 50
    low_priority: 25

  velocity:
    baseline_window_days: 7
    spike_multiplier: 2.0

  risk_keywords:
    high:
      - "death"
      - "killed"
      - "war"
      - "bomb"
      - "attack"
      - "scandal"
      - "abuse"
      - "assault"
    medium:
      - "protest"
      - "strike"
      - "controversy"
      - "boycott"
      - "cancel"
      - "fired"
      - "arrested"
    low:
      - "criticism"
      - "complaint"
      - "issue"
      - "problem"

# Data Source Configuration
sources:
  google_trends:
    enabled: true
    priority: 1
    reliability: 0.9
    rate_limit: 100  # requests per day

  twitter:
    enabled: true
    priority: 1
    reliability: 0.85
    rate_limit: 500
    requires_auth: true

  youtube:
    enabled: true
    priority: 2
    reliability: 0.9
    rate_limit: 10000

  reddit:
    enabled: true
    priority: 3
    reliability: 0.8
    subreddits:
      - "Africa"
      - "Nigeria"
      - "southafrica"
      - "Kenya"
      - "ghana"
      - "Egypt"
      - "Morocco"
      - "hiphopheads"
      - "afrobeats"

  news_rss:
    enabled: true
    priority: 2
    reliability: 0.95
    feeds:
      - name: "BBC Africa"
        url: "https://feeds.bbci.co.uk/news/world/africa/rss.xml"
      - name: "Al Jazeera Africa"
        url: "https://www.aljazeera.com/xml/rss/all.xml"
      - name: "The Guardian Africa"
        url: "https://www.theguardian.com/world/africa/rss"
      - name: "News24"
        url: "https://feeds.news24.com/articles/news24/TopStories/rss"
      - name: "Daily Maverick"
        url: "https://www.dailymaverick.co.za/dmrss/"
      - name: "The Punch Nigeria"
        url: "https://punchng.com/feed/"
      - name: "Premium Times Nigeria"
        url: "https://www.premiumtimesng.com/feed"
      - name: "Nation Kenya"
        url: "https://nation.africa/kenya/rss"
      - name: "Citizen Tanzania"
        url: "https://www.thecitizen.co.tz/feeds/news"
      - name: "Music In Africa"
        url: "https://www.musicinafrica.net/rss.xml"
      - name: "OkayAfrica"
        url: "https://www.okayafrica.com/rss/"
      - name: "NotJustOk"
        url: "https://notjustok.com/feed/"

  wikipedia:
    enabled: true
    priority: 3
    reliability: 0.95
    pageview_threshold: 10000

  tiktok:
    enabled: false  # Requires special access
    priority: 1
    reliability: 0.8
    requires_auth: true
    warning: "TikTok API access restricted. Enable only with proper authorization."

  instagram:
    enabled: false  # Requires Meta API access
    priority: 2
    reliability: 0.8
    requires_auth: true
    warning: "Instagram requires Meta API credentials."

  spotify_internal:
    enabled: false
    priority: 0
    stub: true
    warning: "Placeholder for internal Spotify signals. Requires internal integration."

# Storage Configuration
storage:
  type: "sqlite"  # or "postgres"
  sqlite:
    path: "${DATABASE_PATH:-data/trends.db}"
  postgres:
    host: "${POSTGRES_HOST}"
    port: 5432
    database: "spotify_trends"
    user: "${POSTGRES_USER}"
    password: "${POSTGRES_PASSWORD}"

  retention:
    raw_data_days: 90
    processed_data_days: 365
    baselines_days: 30

# Dashboard Configuration
dashboard:
  host: "0.0.0.0"
  port: 8000
  debug: false
  refresh_interval: 300  # seconds
  max_trends_display: 50

# Digest Configuration
digest:
  enabled: true
  schedule: "0 7 * * *"  # 7 AM Johannesburg time
  recipients: []  # Add email addresses
  format: ["markdown", "html"]

  sections:
    top_trends: 10
    top_risks: 5
    top_opportunities: 5
    watchlist: 10

# Observability
observability:
  log_file: "logs/app.log"
  log_rotation: "1 day"
  log_retention: 30

  alerts:
    enabled: true
    channels: ["log"]  # Add "email", "slack" as needed

  health_check:
    enabled: true
    endpoint: "/health"

# Trend-Jack Intelligence Configuration
trendjack:
  enabled: true
  schedule: "0 4 * * *"  # 4 AM UTC (6 AM SAST)

  # Markets for trend-jack analysis
  markets:
    - "NG"
    - "KE"
    - "GH"
    - "ZA"

  # Cards per market per day
  cards_per_market: 6

  # Caching TTLs (in hours)
  cache_ttl:
    artist_spikes_memory: 4
    artist_spikes_db: 12
    culture_searches_memory: 6
    culture_searches_db: 24
    style_signals_memory: 12
    style_signals_db: 48
    pitch_cards_memory: 6
    pitch_cards_db: 24

  # Data freshness thresholds (in hours)
  freshness_thresholds:
    artist_spikes:
      ok: 4
      degraded: 12
    culture_searches:
      ok: 6
      degraded: 24
    style_signals:
      ok: 12
      degraded: 48
    pitch_cards:
      ok: 6
      degraded: 24

# Authentication (optional - set AUTH_PASSWORD env var to enable)
auth:
  enabled: ${AUTH_PASSWORD:-}
  session_duration_hours: 24
  cookie_name: "spotify_trends_session"
